<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.16.0.final using JasperReports Library version 6.16.0-48579d909b7943b64690c65c71e07e0b80981928  -->
<jasperReport xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xmlns="http://jasperreports.sourceforge.net/jasperreports"
              xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd"
              name="header" pageWidth="350" pageHeight="300" columnWidth="310" leftMargin="20" rightMargin="20"
              topMargin="20" bottomMargin="20" uuid="dd419cb9-c09d-4a56-9d47-1c65f4d6221f">
    <property name="com.jaspersoft.studio.data.defaultdataadapter" value="dev avogest"/>
    <property name="com.jaspersoft.studio.data.sql.tables" value=""/>
    <property name="com.jaspersoft.studio.unit." value="pixel"/>
    <property name="com.jaspersoft.studio.unit.pageHeight" value="pixel"/>
    <property name="com.jaspersoft.studio.unit.pageWidth" value="pixel"/>
    <property name="com.jaspersoft.studio.unit.topMargin" value="pixel"/>
    <property name="com.jaspersoft.studio.unit.bottomMargin" value="pixel"/>
    <property name="com.jaspersoft.studio.unit.leftMargin" value="pixel"/>
    <property name="com.jaspersoft.studio.unit.rightMargin" value="pixel"/>
    <property name="com.jaspersoft.studio.unit.columnWidth" value="pixel"/>
    <property name="com.jaspersoft.studio.unit.columnSpacing" value="pixel"/>
    <parameter name="factureId" class="java.lang.Integer">
        <defaultValueExpression><![CDATA[$P{factureId}]]></defaultValueExpression>
    </parameter>
    <parameter name="vcKey" class="java.lang.String"/>
    <queryString language="SQL">
        <![CDATA[select b.id_client,b.f_tva,t_countries.nom_fr_fr,
if(f.id_echeance=2,tfech.description,f.date_echeance) feche,if(b.client_type=2,b.f_company,concat(a.title,' ',b.f_prenom,' ',b.f_nom)) cl,f.id_echeance,f.facture_ref, ft.description, ft.acronyme,f.montant,f.year_facture,f.is_valid,f.num_facture,d.id_doss,d.couthoraire,d.success_fee_perc,d.success_fee_montant,f.id_facture,f.id_facture_type,DATE_FORMAT(f.date_echeance, '%d/%m/%Y') facture_date_echeance,DATE_FORMAT(f.date_value, '%d/%m/%Y') facture_date_value,d.year_doss,lpad(d.num_doss,4,'0') ndo,
	b.f_rue,concat(b.f_cp,' ',b.f_ville) ville 
	from t_factures f 
	LEFT JOIN (
		select tdoss.id_doss,tdoss.year_doss,tdoss.num_doss,
		tdoss.couthoraire,tdoss.success_fee_perc,
		tdoss.success_fee_montant
		from t_dossiers tdoss
	) d on d.id_doss=f.id_doss
	,t_clients b,t_title a,t_facture_type ft,t_facture_echeance tfech,t_countries 
	where f.id_facture=$P{factureId}
	and f.vc_key=$P{vcKey}
and f.id_tiers=b.id_client 
AND b.id_title=a.id_title 
and f.id_facture_type=ft.id_facture_type
 and f.id_echeance=tfech.id 
 and t_countries.alpha3=b.id_country_alpha3]]>
	</queryString>
	<field name="id_client" class="java.lang.Long">
        <property name="com.jaspersoft.studio.field.name" value="id_client"/>
		<property name="com.jaspersoft.studio.field.label" value="id_client"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="t_clients"/>
	</field>
	<field name="f_tva" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="f_tva"/>
		<property name="com.jaspersoft.studio.field.label" value="f_tva"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="t_clients"/>
	</field>
	<field name="nom_fr_fr" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="nom_fr_fr"/>
		<property name="com.jaspersoft.studio.field.label" value="nom_fr_fr"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_countries"/>
    </field>
    <field name="feche" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="feche"/>
        <property name="com.jaspersoft.studio.field.label" value="feche"/>
    </field>
    <field name="cl" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="cl"/>
        <property name="com.jaspersoft.studio.field.label" value="cl"/>
    </field>
    <field name="id_echeance" class="java.lang.Integer">
        <property name="com.jaspersoft.studio.field.name" value="id_echeance"/>
        <property name="com.jaspersoft.studio.field.label" value="id_echeance"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_factures"/>
    </field>
    <field name="facture_ref" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="facture_ref"/>
        <property name="com.jaspersoft.studio.field.label" value="facture_ref"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_factures"/>
    </field>
    <field name="description" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="description"/>
        <property name="com.jaspersoft.studio.field.label" value="description"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_facture_type"/>
    </field>
    <field name="acronyme" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="acronyme"/>
        <property name="com.jaspersoft.studio.field.label" value="acronyme"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_facture_type"/>
    </field>
    <field name="montant" class="java.math.BigDecimal">
        <property name="com.jaspersoft.studio.field.name" value="montant"/>
        <property name="com.jaspersoft.studio.field.label" value="montant"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_factures"/>
    </field>
    <field name="year_facture" class="java.lang.Integer">
        <property name="com.jaspersoft.studio.field.name" value="year_facture"/>
        <property name="com.jaspersoft.studio.field.label" value="year_facture"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_factures"/>
    </field>
    <field name="is_valid" class="java.lang.Integer">
        <property name="com.jaspersoft.studio.field.name" value="is_valid"/>
        <property name="com.jaspersoft.studio.field.label" value="is_valid"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_factures"/>
    </field>
    <field name="num_facture" class="java.lang.Integer">
        <property name="com.jaspersoft.studio.field.name" value="num_facture"/>
        <property name="com.jaspersoft.studio.field.label" value="num_facture"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_factures"/>
    </field>
    <field name="id_doss" class="java.lang.Long">
        <property name="com.jaspersoft.studio.field.name" value="id_doss"/>
        <property name="com.jaspersoft.studio.field.label" value="id_doss"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_dossiers"/>
    </field>
    <field name="couthoraire" class="java.lang.Integer">
        <property name="com.jaspersoft.studio.field.name" value="couthoraire"/>
        <property name="com.jaspersoft.studio.field.label" value="couthoraire"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_dossiers"/>
    </field>
    <field name="success_fee_perc" class="java.lang.Integer">
        <property name="com.jaspersoft.studio.field.name" value="success_fee_perc"/>
        <property name="com.jaspersoft.studio.field.label" value="success_fee_perc"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_dossiers"/>
    </field>
    <field name="success_fee_montant" class="java.lang.Integer">
        <property name="com.jaspersoft.studio.field.name" value="success_fee_montant"/>
        <property name="com.jaspersoft.studio.field.label" value="success_fee_montant"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_dossiers"/>
    </field>
    <field name="id_facture" class="java.lang.Long">
        <property name="com.jaspersoft.studio.field.name" value="id_facture"/>
        <property name="com.jaspersoft.studio.field.label" value="id_facture"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_factures"/>
    </field>
    <field name="id_facture_type" class="java.lang.Integer">
        <property name="com.jaspersoft.studio.field.name" value="id_facture_type"/>
        <property name="com.jaspersoft.studio.field.label" value="id_facture_type"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_factures"/>
    </field>
    <field name="facture_date_echeance" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="facture_date_echeance"/>
        <property name="com.jaspersoft.studio.field.label" value="facture_date_echeance"/>
    </field>
    <field name="facture_date_value" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="facture_date_value"/>
        <property name="com.jaspersoft.studio.field.label" value="facture_date_value"/>
    </field>
    <field name="year_doss" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="year_doss"/>
        <property name="com.jaspersoft.studio.field.label" value="year_doss"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_dossiers"/>
    </field>
    <field name="ndo" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="ndo"/>
        <property name="com.jaspersoft.studio.field.label" value="ndo"/>
    </field>
    <field name="f_rue" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="f_rue"/>
        <property name="com.jaspersoft.studio.field.label" value="f_rue"/>
        <property name="com.jaspersoft.studio.field.tree.path" value="t_clients"/>
    </field>
    <field name="ville" class="java.lang.String">
        <property name="com.jaspersoft.studio.field.name" value="ville"/>
        <property name="com.jaspersoft.studio.field.label" value="ville"/>
    </field>
    <title>
        <band height="220">
            <property name="com.jaspersoft.studio.unit.height" value="px"/>
            <frame>
                <reportElement positionType="Float" x="0" y="-9" width="370" height="229"
                               uuid="d6502ccb-923a-4681-b467-562896b740b1">
                    <property name="com.jaspersoft.studio.layout"/>
                    <property name="com.jaspersoft.studio.unit.width" value="px"/>
                    <property name="com.jaspersoft.studio.unit.x" value="px"/>
                    <property name="com.jaspersoft.studio.unit.height" value="px"/>
                </reportElement>
                <box>
                    <pen lineWidth="0.0"/>
                </box>
                <textField>
                    <reportElement x="182" y="0" width="100" height="20" uuid="39216bef-2c55-4ad2-93f9-23be40b0dc61"/>
                    <textElement textAlignment="Right">
                        <font size="11" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{facture_ref}]]></textFieldExpression>
                </textField>
                <staticText>
                    <reportElement x="68" y="-1" width="111" height="19" uuid="5964dbef-1bda-4ac5-9da3-d81eff29a886"/>
                    <textElement textAlignment="Right">
                        <font size="11" isBold="true"/>
                    </textElement>
                    <text><![CDATA[Nos references: ]]></text>
                </staticText>
                <staticText>
                    <reportElement x="70" y="18" width="111" height="19" uuid="a2e8b86f-219f-446c-974c-806030dc68af"/>
                    <textElement textAlignment="Right">
                        <font size="11" isBold="false"/>
                    </textElement>
                    <text><![CDATA[Dossier:]]></text>
                </staticText>
                <textField>
                    <reportElement x="185" y="18" width="98" height="20" uuid="e007bab6-2fca-46a9-923f-2f08a7bfdd71"/>
                    <textElement textAlignment="Right">
                        <font size="11" isBold="false"/>
                    </textElement>
                    <textFieldExpression>
                        <![CDATA[$F{year_doss} != null ? $F{year_doss} + "/" + $F{ndo} : "NA"]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="189" y="37" width="94" height="20" uuid="f7665641-4fd3-4ec3-b507-78c5d948a0d8"/>
                    <textElement textAlignment="Right">
                        <font size="11" isBold="false"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{facture_date_value}]]></textFieldExpression>
                </textField>
                <staticText>
                    <reportElement x="70" y="38" width="114" height="19" uuid="472dcaa0-81ad-470e-a6ce-af26c6599a50"/>
                    <textElement textAlignment="Right">
                        <font size="11" isBold="false"/>
                    </textElement>
                    <text><![CDATA[Date:]]></text>
                </staticText>
                <textField>
                    <reportElement x="7" y="88" width="221" height="20" uuid="79c9d9bb-26c7-4020-9ea6-3e450ebd4144"/>
                    <textElement textAlignment="Left">
                        <font size="11" isBold="false"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{cl}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="8" y="109" width="220" height="20" uuid="e134eed2-03af-44c5-91c2-4ccbc5c39e28"/>
                    <textElement textAlignment="Left">
                        <font size="11" isBold="false"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{f_rue}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="9" y="130" width="219" height="20" uuid="850ecccc-a42b-4c4b-b813-2db7d7966f51"/>
                    <textElement textAlignment="Left">
                        <font size="11" isBold="false"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{ville}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="10" y="151" width="218" height="20" uuid="02e6002e-3f03-425c-a778-262590a1f111"/>
                    <textElement textAlignment="Left">
                        <font size="11" isBold="false"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{nom_fr_fr}]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="-171" y="188" width="331" height="42"
                                   uuid="0ee13122-b170-457e-9a03-d1dde7a376c1"/>
                    <textElement textAlignment="Center">
                        <font size="20" isBold="true"/>
                    </textElement>
                    <textFieldExpression><![CDATA[($F{description}).toUpperCase()]]></textFieldExpression>
                </textField>
                <textField>
                    <reportElement x="10" y="169" width="218" height="17" uuid="0bae87e3-659c-442b-b3f9-bf3720c6dfce"/>
                    <textElement textAlignment="Left">
                        <font size="11" isBold="false"/>
                    </textElement>
                    <textFieldExpression>
                        <![CDATA[$F{f_tva} != null && $F{f_tva} != ""?"TVA"+$F{f_tva}:""]]></textFieldExpression>
                </textField>
                <staticText>
                    <reportElement x="68" y="56" width="114" height="19" uuid="37fe5420-c5f2-42da-a0ef-02111e2781e7"/>
                    <textElement textAlignment="Right">
                        <font size="11" isBold="false"/>
                    </textElement>
                    <text><![CDATA[Échéance:]]></text>
                </staticText>
                <textField>
                    <reportElement x="188" y="55" width="94" height="20" uuid="188c49c1-4416-49f0-a40d-3b8d96a68c33"/>
                    <textElement textAlignment="Right">
                        <font size="11" isBold="false"/>
                    </textElement>
                    <textFieldExpression><![CDATA[$F{facture_date_echeance}]]></textFieldExpression>
                </textField>
            </frame>
        </band>
    </title>
</jasperReport>
